<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisis Co-Benefit Area Kecil 2025-2050</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/@sgratzl/chartjs-chart-boxplot@3.6.0/build/index.umd.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
    <div class="nav-container">
        <nav>
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <span>Co-Benefit Analysis</span>
            </div>
            <div class="nav-links">
                <a href="#home">Home</a>
            </div>
        </nav>
    </div>
    
    <div class="nav-dots">
        <div class="dot active" data-label="Home" data-target="home"></div>
        <% cases.forEach(function(item) { %>
            <div class="dot" data-label="<%= item.number %>" data-target="<%= item.id %>"></div>
        <% }); %>
    </div>
    
    <section class="hero" id="home">
        <h1 class="fade-in">Analisis Co-Benefit Area Kecil</h1>
        <p class="subtitle fade-in">2025 - 2050</p>
        <p class="fade-in">Visualisasi interaktif dari 10 studi kasus berdasarkan data level 2, shapefile, dan lookup untuk memahami dampak kebijakan lingkungan di area kecil Inggris dan Wales.</p>
        <div class="scroll-indicator">
            <span>Scroll untuk menjelajahi</span>
            <i class="fas fa-chevron-down"></i>
        </div>
    </section>

    <div class="stats-section fade-in">
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-icon" style="background: rgba(26, 82, 118, 0.1); color: #1a5276;">
                    <i class="fas fa-database"></i>
                </div>
                <div class="stat-info">
                    <h3><%= stats.totalData.toLocaleString() %></h3>
                    <p>Total Data Points</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon" style="background: rgba(88, 214, 141, 0.1); color: #27ae60;">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <div class="stat-info">
                    <h3><%= stats.years %></h3>
                    <p>Periode Analisis</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon" style="background: rgba(244, 208, 63, 0.1); color: #d4ac0d;">
                    <i class="fas fa-folder-open"></i>
                </div>
                <div class="stat-info">
                    <h3><%= stats.totalCases %></h3>
                    <p>Studi Kasus</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon" style="background: rgba(231, 76, 60, 0.1); color: #c0392b;">
                    <i class="fas fa-map-marked-alt"></i>
                </div>
                <div class="stat-info">
                    <h3><%= stats.region %></h3>
                    <p>Cakupan Wilayah</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="case-container">
        <% cases.forEach(function(item, index) { 
            // Menentukan layout Zig-Zag (Genap: Teks-Kiri, Ganjil: Visual-Kiri)
            let isEven = index % 2 === 0;
            let textAnim = isEven ? 'slide-in-left' : 'slide-in-right';
            let visualAnim = isEven ? 'slide-in-right' : 'slide-in-left';
        %>
        <section class="case-section" id="<%= item.id %>">
            <div class="case-number"><%= item.number %></div>
            <h2 class="case-title"><%= item.title %></h2>
            
            <div class="case-content">
                
                <% /* =================================================================
                      LAYOUT GENAP (Case 1, 3, 5, 7, 9) -> Teks di Kiri, Visual di Kanan
                   ================================================================= */ %>
                <% if (isEven) { %>
                    <div class="case-text <%= textAnim %>">
                        <%- item.content %>
                    </div>
                    
                    <div class="case-visual <%= visualAnim %>">
                        
                        <% if (item.id === 'case1' && item.chartData) { %>
                            <div class="chart-wrapper" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
                                <h3 style="color: #1a5276; margin-bottom: 20px;"><%= item.visualTitle %></h3>
                                
                                <div style="position: relative; height: 250px; width: 100%; max-width: 350px;">
                                    <canvas id="case1Chart" 
                                        data-air="<%= item.chartData.airQuality %>" 
                                        data-others="<%= item.chartData.otherBenefits %>">
                                    </canvas>
                                    
                                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                                        <p style="margin:0; font-size: 0.8rem; color: #666;">Air Quality</p>
                                        <h2 style="margin:0; color: #2ecc71; font-size: 1.8rem;"><%= item.chartData.percentage %>%</h2>
                                        <p style="margin:0; font-size: 0.7rem; color: #666;">Contribution</p>
                                    </div>
                                </div>
                            </div>

                        <% } else if (item.id === 'case3' && item.chartData) { %>
                            <div class="chart-wrapper" style="width: 90%; height: 90%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                                <h3 style="color: #1a5276; margin-bottom: 10px;"><%= item.visualTitle %></h3>
                                <div style="position: relative; height:300px; width:100%;">
                                    <canvas id="case3Chart" data-points="<%= JSON.stringify(item.chartData) %>"></canvas>
                                </div>
                                <p style="font-size:0.8rem; color:#666; margin-top:5px;">Sumbu X: Populasi (Log Scale)</p>
                            </div>

                        <% } else if (item.id === 'case5' && item.chartData) { %>
                            <div class="chart-wrapper" style="width: 90%; height: 90%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                                <h3 style="color: #1a5276; margin-bottom: 15px;"><%= item.visualTitle %></h3>
                                <div style="position: relative; height:300px; width:100%;">
                                    <canvas id="case5Chart" data-values='<%- JSON.stringify(item.chartData) %>'></canvas>
                                </div>
                                <p style="font-size:0.8rem; color:#666; margin-top:5px;">Statistik: Min, Q1, Median, Q3, Max</p>
                            </div>

                        <% } else if (item.id === 'case7' && item.chartData) { %>
                            <div class="chart-wrapper" style="width: 90%; height: 90%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                                <h3 style="color: #c0392b; margin-bottom: 15px;"><%= item.visualTitle %></h3>
                                <div style="position: relative; height:300px; width:100%;">
                                    <canvas id="case7Chart" 
                                        data-labels="<%= JSON.stringify(item.chartData.labels) %>"
                                        data-values="<%= JSON.stringify(item.chartData.values) %>"
                                    ></canvas>
                                </div>
                                <p style="font-size:0.8rem; color:#666; margin-top:5px;">Nilai dalam £ Million (Negatif = Biaya/Kerugian)</p>
                            </div>

                        <% } else if (item.id === 'case9' && item.chartData) { %>
                            <div class="chart-wrapper" style="width: 100%; height: 100%; display: flex; flex-direction: column;">
                                <div id="case9Map" style="width: 100%; height: 100%; min-height: 400px; z-index: 1;"
                                     data-points='<%- JSON.stringify(item.chartData) %>'>
                                </div>
                            </div>

                        <% } else { %>
                            <div class="visual-placeholder">
                                <i class="<%= item.icon %>"></i>
                                <h3><%= item.visualTitle %></h3>
                                <p><%= item.visualDesc %></p>
                            </div>
                        <% } %>
                    </div>

                <% /* =================================================================
                      LAYOUT GANJIL (Case 2, 4, 6, 8, 10) -> Visual di Kiri, Teks di Kanan
                   ================================================================= */ %>
                <% } else { %>
                    <div class="case-visual <%= visualAnim %>">
                        
                        <% if (item.id === 'case2') { %>
                            <div class="chart-wrapper" style="width: 90%; height: 90%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                                <h3 style="color: #1a5276; margin-bottom: 15px;"><%= item.visualTitle %></h3>
                                <div style="position: relative; height:300px; width:100%;">
                                    <canvas id="case2Chart" 
                                        data-years='[2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040,2041,2042,2043,2044,2045,2046,2047,2048,2049,2050]'
                                        data-values='[172.41, 408.28, 706.55, 1078.46, 1535.26, 2112.43, 2820.96, 3714.40, 4812.46, 6111.23, 7632.57, 9362.94, 11297.18, 13428.78, 15746.93, 18241.06, 20886.02, 23668.27, 26571.26, 29577.09, 32667.16, 35806.77, 38950.41, 42074.37, 45177.08, 48259.41]'
                                    ></canvas>
                                </div>
                            </div>

                        <% } else if (item.id === 'case4' && item.chartData) { %>
                            <div class="chart-wrapper" style="width: 90%; height: 90%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                                <h3 style="color: #1a5276; margin-bottom: 15px;"><%= item.visualTitle %></h3>
                                <div style="position: relative; height:300px; width:100%;">
                                    <canvas id="case4Chart" 
                                        data-labels="<%= JSON.stringify(item.chartData.labels) %>"
                                        data-values="<%= JSON.stringify(item.chartData.values) %>"
                                    ></canvas>
                                </div>
                            </div>

                        <% } else if (item.id === 'case6' && item.chartData) { %>
                            <div class="chart-wrapper" style="width: 90%; height: 90%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                                <h3 style="color: #1a5276; margin-bottom: 15px;"><%= item.visualTitle %></h3>
                                <div style="position: relative; height:300px; width:100%;">
                                    <canvas id="case6Chart" data-series='<%- JSON.stringify(item.chartData) %>'></canvas>
                                </div>
                                <p style="font-size:0.8rem; color:#666; margin-top:5px;">Multi-Line Trend (2025-2050)</p>
                            </div>

                        <% } else if (item.id === 'case8' && item.chartData) { %>
                            <div class="chart-wrapper" style="width: 90%; height: 90%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                                <h3 style="color: #1a5276; margin-bottom: 15px;"><%= item.visualTitle %></h3>
                                <div style="position: relative; height:300px; width:100%;">
                                    <canvas id="case8Chart" data-slope="<%= JSON.stringify(item.chartData) %>"></canvas>
                                </div>
                                <p style="font-size:0.8rem; color:#666; margin-top:5px;">Kiri: 2025 (Short Term) • Kanan: 2050 (Long Term)</p>
                            </div>

                        <% } else if (item.id === 'case10' && item.chartData) { %>
                            <div class="chart-wrapper" style="width: 90%; height: 90%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                                <h3 style="color: #1a5276; margin-bottom: 15px;"><%= item.visualTitle %></h3>
                                <div style="position: relative; height:300px; width:100%;">
                                    <canvas id="case10Chart" 
                                        data-labels="<%= JSON.stringify(item.chartData.labels) %>"
                                        data-values="<%= JSON.stringify(item.chartData.values) %>"
                                    ></canvas>
                                </div>
                                <p style="font-size:0.8rem; color:#666; margin-top:5px;">Hijau = Benefit (+) | Merah = Cost (-)</p>
                            </div>

                        <% } else { %>
                            <div class="visual-placeholder">
                                <i class="<%= item.icon %>"></i>
                                <h3><%= item.visualTitle %></h3>
                                <p><%= item.visualDesc %></p>
                            </div>
                        <% } %>

                    </div>
                    
                    <div class="case-text <%= textAnim %>">
                        <%- item.content %>
                    </div>
                <% } %>
            </div>
        </section>
        <% }); %>
    </div>
    
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Tentang Analisis Ini</h3>
                <p>Visualisasi interaktif ini didasarkan pada analisis data co-benefit area kecil di Inggris dan Wales untuk periode 2025-2050.</p>
            </div>
            <div class="footer-section">
                <h3>Metodologi</h3>
                <p>Analisis dilakukan menggunakan Python dengan library Pandas, GeoPandas, dan Matplotlib untuk pemrosesan data dan visualisasi awal.</p>
            </div>
            <div class="footer-section">
                <h3>Kontak</h3>
                <p>Visualisasi ini dibuat untuk tujuan edukasi dan perencanaan kebijakan berbasis bukti.</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Analisis Co-Benefit Area Kecil.</p>
        </div>
    </footer>
    
    <script src="/js/script.js"></script>
</body>
</html>
